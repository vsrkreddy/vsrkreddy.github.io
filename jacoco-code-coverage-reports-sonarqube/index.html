<!DOCTYPE html>
<html lang="en" itemscope itemtype="http://schema.org/BlogPosting" >
    <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>JaCoCo Code Coverage And Reports With Sonarqube</title>
    <meta name="description" content="A blog about lorem ipsum dolor sit amet">

    <!-- Google Authorship Markup -->
    <link rel="author" href="https://plus.google.com/+?rel=author">

    <!-- Social: Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@">
    <meta name="twitter:title" content="JaCoCo Code Coverage And Reports With Sonarqube">
    <meta name="twitter:description" content="A blog about lorem ipsum dolor sit amet">
    
    <meta property="twitter:image:src" content="https://sanjaypatel2525.github.io/assets/img/blog-image.png">
    

    <!-- Social: Facebook / Open Graph -->
    <meta property="og:url" content="https://sanjaypatel2525.github.io/jacoco-code-coverage-reports-sonarqube/">
    <meta property="og:title" content="JaCoCo Code Coverage And Reports With Sonarqube">
    
    <meta property="og:image" content="https://sanjaypatel2525.github.io/assets/img/blog-image.png">
    
    <meta property="og:description" content="A blog about lorem ipsum dolor sit amet">
    <meta property="og:site_name" content="Sanjay Patel - Blogs">

    <!-- Social: Google+ / Schema.org  -->
    <meta itemprop="name" content="JaCoCo Code Coverage And Reports With Sonarqube"/>
    <meta itemprop="description" content="A blog about lorem ipsum dolor sit amet">
    <meta itemprop="image" content="https://sanjaypatel2525.github.io/assets/img/blog-image.png"/>

    <!-- Favicon -->
    <link rel="shortcut icon" href="/assets/img/icons/favicon.ico" type="image/x-icon" />
    <!-- Apple Touch Icons -->
    <link rel="apple-touch-icon" href="/assets/img/icons/apple-touch-icon.png" />
    <link rel="apple-touch-icon" sizes="57x57" href="/assets/img/icons/apple-touch-icon-57x57.png" />
    <link rel="apple-touch-icon" sizes="72x72" href="/assets/img/icons/apple-touch-icon-72x72.png" />
    <link rel="apple-touch-icon" sizes="114x114" href="/assets/img/icons/apple-touch-icon-114x114.png" />
    <link rel="apple-touch-icon" sizes="144x144" href="/assets/img/icons/apple-touch-icon-144x144.png" />
    <link rel="apple-touch-icon" sizes="60x60" href="/assets/img/icons/apple-touch-icon-60x60.png" />
    <link rel="apple-touch-icon" sizes="120x120" href="/assets/img/icons/apple-touch-icon-120x120.png" />
    <link rel="apple-touch-icon" sizes="76x76" href="/assets/img/icons/apple-touch-icon-76x76.png" />
    <link rel="apple-touch-icon" sizes="152x152" href="/assets/img/icons/apple-touch-icon-152x152.png" />

    <!--amp page-->
    
        <link rel="amphtml" href="https://sanjaypatel2525.github.io/amp/jacoco-code-coverage-reports-sonarqube.html">
    
    <!-- Windows 8 Tile Icons -->
    <meta name="application-name" content="Sanjay Patel Blog">
    <meta name="msapplication-TileColor" content="#0562DC">
    <meta name="msapplication-square70x70logo" content="smalltile.png" />
    <meta name="msapplication-square150x150logo" content="mediumtile.png" />
    <meta name="msapplication-wide310x150logo" content="widetile.png" />
    <meta name="msapplication-square310x310logo" content="largetile.png" />
    <!-- Android Lolipop Theme Color -->
    <meta name="theme-color" content="">

    <link rel="stylesheet" href="/assets/css/main.css">
    <link rel="canonical" href="https://sanjaypatel2525.github.io/jacoco-code-coverage-reports-sonarqube/">
    <link rel="alternate" type="application/rss+xml" title="Sanjay Patel - Blogs" href="https://sanjaypatel2525.github.io/feed.xml" />
</head>

    <body>
        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" display="none" version="1.1"><defs><symbol id="icon-menu" viewBox="0 0 1024 1024"><path class="path1" d="M128 213.333h768q17.667 0 30.167 12.5t12.5 30.167-12.5 30.167-30.167 12.5h-768q-17.667 0-30.167-12.5t-12.5-30.167 12.5-30.167 30.167-12.5zM128 725.333h768q17.667 0 30.167 12.5t12.5 30.167-12.5 30.167-30.167 12.5h-768q-17.667 0-30.167-12.5t-12.5-30.167 12.5-30.167 30.167-12.5zM128 469.333h768q17.667 0 30.167 12.5t12.5 30.167-12.5 30.167-30.167 12.5h-768q-17.667 0-30.167-12.5t-12.5-30.167 12.5-30.167 30.167-12.5z"/></symbol><symbol id="icon-search" viewBox="0 0 951 1024"><path class="path1" d="M658.286 475.429q0-105.714-75.143-180.857t-180.857-75.143-180.857 75.143-75.143 180.857 75.143 180.857 180.857 75.143 180.857-75.143 75.143-180.857zM950.857 950.857q0 29.714-21.714 51.429t-51.429 21.714q-30.857 0-51.429-21.714l-196-195.429q-102.286 70.857-228 70.857-81.714 0-156.286-31.714t-128.571-85.714-85.714-128.571-31.714-156.286 31.714-156.286 85.714-128.571 128.571-85.714 156.286-31.714 156.286 31.714 128.571 85.714 85.714 128.571 31.714 156.286q0 125.714-70.857 228l196 196q21.143 21.143 21.143 51.429z"/></symbol><symbol id="icon-close" viewBox="0 0 805 1024"><path class="path1" d="M741.714 755.429q0 22.857-16 38.857l-77.714 77.714q-16 16-38.857 16t-38.857-16l-168-168-168 168q-16 16-38.857 16t-38.857-16l-77.714-77.714q-16-16-16-38.857t16-38.857l168-168-168-168q-16-16-16-38.857t16-38.857l77.714-77.714q16-16 38.857-16t38.857 16l168 168 168-168q16-16 38.857-16t38.857 16l77.714 77.714q16 16 16 38.857t-16 38.857l-168 168 168 168q16 16 16 38.857z"/></symbol><symbol id="icon-twitter" viewBox="0 0 951 1024"><path class="path1" d="M925.714 233.143q-38.286 56-92.571 95.429 0.571 8 0.571 24 0 74.286-21.714 148.286t-66 142-105.429 120.286-147.429 83.429-184.571 31.143q-154.857 0-283.429-82.857 20 2.286 44.571 2.286 128.571 0 229.143-78.857-60-1.143-107.429-36.857t-65.143-91.143q18.857 2.857 34.857 2.857 24.571 0 48.571-6.286-64-13.143-106-63.714t-42-117.429v-2.286q38.857 21.714 83.429 23.429-37.714-25.143-60-65.714t-22.286-88q0-50.286 25.143-93.143 69.143 85.143 168.286 136.286t212.286 56.857q-4.571-21.714-4.571-42.286 0-76.571 54-130.571t130.571-54q80 0 134.857 58.286 62.286-12 117.143-44.571-21.143 65.714-81.143 101.714 53.143-5.714 106.286-28.571z"/></symbol><symbol id="icon-facebook" viewBox="0 0 585 1024"><path class="path1" d="M548 6.857v150.857h-89.714q-49.143 0-66.286 20.571t-17.143 61.714v108h167.429l-22.286 169.143h-145.143v433.714h-174.857v-433.714h-145.714v-169.143h145.714v-124.571q0-106.286 59.429-164.857t158.286-58.571q84 0 130.286 6.857z"/></symbol><symbol id="icon-google-plus" viewBox="0 0 951 1024"><path class="path1" d="M420 454.857q0 20.571 18.286 40.286t44.286 38.857 51.714 42 44 59.429 18.286 81.143q0 51.429-27.429 98.857-41.143 69.714-120.571 102.571t-170.286 32.857q-75.429 0-140.857-23.714t-98-78.571q-21.143-34.286-21.143-74.857 0-46.286 25.429-85.714t67.714-65.714q74.857-46.857 230.857-57.143-18.286-24-27.143-42.286t-8.857-41.714q0-20.571 12-48.571-26.286 2.286-38.857 2.286-84.571 0-142.571-55.143t-58-139.714q0-46.857 20.571-90.857t56.571-74.857q44-37.714 104.286-56t124.286-18.286h238.857l-78.857 50.286h-74.857q42.286 36 64 76t21.714 91.429q0 41.143-14 74t-33.714 53.143-39.714 37.143-34 35.143-14 37.714zM336.571 400q21.714 0 44.571-9.429t37.714-24.857q30.286-32.571 30.286-90.857 0-33.143-9.714-71.429t-27.714-74-48.286-59.143-66.857-23.429q-24 0-47.143 11.143t-37.429 30q-26.857 33.714-26.857 91.429 0 26.286 5.714 55.714t18 58.857 29.714 52.857 42.857 38.286 55.143 14.857zM337.714 898.857q33.143 0 63.714-7.429t56.571-22.286 41.714-41.714 15.714-62.286q0-14.286-4-28t-8.286-24-15.429-23.714-16.857-20-22-19.714-20.857-16.571-23.714-17.143-20.857-14.857q-9.143-1.143-27.429-1.143-30.286 0-60 4t-61.429 14.286-55.429 26.286-39.143 42.571-15.429 60.286q0 40 20 70.571t52.286 47.429 68 25.143 72.857 8.286zM800.571 398.286h121.714v61.714h-121.714v125.143h-60v-125.143h-121.143v-61.714h121.143v-124h60v124z"/></symbol></defs></svg>

        <header class="bar-header">
    <h1 class="logo">
        <a href="/"></a>
    </h1>
</header>
<div class="search-wrapper">
    <div class="search-form">
        <input type="text" class="search-field" placeholder="Search...">
        <svg class="icon-remove-sign"><use xlink:href="#icon-close"></use></svg>
        <ul class="search-results search-list"></ul>
    </div>
</div>

<div id="fade" class="overlay"></div>
<a id="slide" class="slideButton fade">
    <svg id="open" class="icon-menu"><use xlink:href="#icon-menu"></use></svg>
    <svg id="close" class="icon-menu"><use xlink:href="#icon-close"></use></svg>
</a>
<aside id="sidebar">
<nav id="navigation">
  <h2>MENU</h2>
  <ul>
    
      <li><a href="https://sanjaypatel2525.github.io/">Home</a></li>
    
      <li><a href="https://sanjaypatel2525.github.io/series">Series</a></li>
    
      <li><a href="https://sanjaypatel2525.github.io/tags">Tags</a></li>
    
      <li><a href="https://sanjaypatel2525.github.io/pretty-print/">Pretty Print</a></li>
    
      <li><a href="https://sanjaypatel2525.github.io/sort-distinct/">Sort & Distinct</a></li>
    
    <li><a class="feed" href="https://sanjaypatel2525.github.io/feed.xml" title="Atom/RSS feed">Feed</a></li>
  </ul>
</nav>
</aside>
<a id="search" class="dosearch">
    <svg class="icon-menu icon-search"><use xlink:href="#icon-search"></use></svg>
</a>

<header class="header-post" role="banner">
     <div class="content">
        
            <time itemprop="datePublished" datetime="2018-03-04T03:06:05-05:00" class="date">04 Mar 2018</time>
        
        <h1 class="post-title" itemprop="name">JaCoCo Code Coverage And Reports With Sonarqube</h1>
        <p itemprop="description" class="subtitle"></p>
    </div>
</header>
        <section class="post">

            <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- Ad Unit1 -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-6254849299387322"
     data-ad-slot="2070150131"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
            <article role="article" id="post" class="post-content" itemprop="articleBody">
                <p>We have already covered how to do <a href="http://abyte.stream/2018/02/22/code-quality-analysis-sonar/">code quality check with Sonarqube</a> in my previous blog. In this blog, we will be discussing how can we setup JaCoCo a code coverage tool and exports reports to SonarQube. Though report can be directly read but having reported at a single place is a good idea. So, let get into  ‘JaCoCo Code Coverage And Reports With Sonarqube’</p>
<h2 id="what-this-blog-will-cover">What this blog will cover.</h2>

<p>What is JaCoCo and why you need this?
Setting up JaCoCo.
Importing reports to SonarQube</p>

<h2 id="what-is-jacoco-and-why-you-need-this">What is JaCoCo and why you need this?</h2>
<p><img class="alignnone size-full wp-image-274 " src="/assets/img_5a9b6290e8d26.png" alt="" />
JaCoCo is an abbreviation for Java Code Coverage.  It’s free to open source library developed by EclEmma. This tool helps us in finding out the piece of code which is not used at all while running the system, It can be manual or by some sort automatic test. When we are working in the team and we have many minds handling the same project there can cases somebody has written a code which doesn’t execute at all in runtime or worst is not covered by unit test. Attaching JaCoCo to your unit test make sure you haven’t missed out any unwanted untested code. It gives you how many times your code got executed.</p>
<h2 id="setting-up-jacoco">Setting up JaCoCo.</h2>
<p>There are multiple ways of running JaCoCo for your project, You can pick any of them depending on your need. Don’t worry, in the end, all will generate same data which we can use in Sonarqube.  We are going to export the generated data in *.exec format. There are other formats as well like HTML, zip XML and CSV.</p>

<ul>
  <li>Install it on Eclipse.</li>
  <li>Install using maven.</li>
  <li>Install standalone JaCoCo java agent on any running java process or server.</li>
</ul>

<h2 id="install-it-on-eclipse">Install it on Eclipse.</h2>
<p>This is the easiest approach and best suited when you are developing your code and running unit test cases on the local system.
Steps to install it on eclipse.</p>

<h3 id="click-or-drag-below-link-in-your-eclipse">Click or drag below link in your eclipse.</h3>
<p><a title="Drag to your running Eclipse workspace to install EclEmma Java Code Coverage" href="http://marketplace.eclipse.org/marketplace-client-intro?mpc_install=264">
<img style="vertical-align: text-bottom; border: 0px solid black;" src="/assets/btn-install.png" alt="Drag to your running Eclipse workspace to install EclEmma Java Code Coverage" />
</a></p>

<h3 id="install-from-update-sites">Install from update sites.</h3>
<p>Go to Help-&gt; Install new software and put in below URL.
http://update.eclemma.org<img class="alignnone size-full wp-image-269" src="/assets/img_5a9b149e3295e.png" alt="" /></p>

<h3 id="download-plugin-zip-and-install-manually">Download plugin zip and install manually.</h3>
<p><a href="http://www.eclemma.org/download.html" rel="nofollow">http://www.eclemma.org/download.html</a></p>

<h2 id="install-using-maven">Install using maven.</h2>
<p><img class="alignnone size-full wp-image-273 " src="/assets/img_5a9b625756041.png" alt="" />
If you are already using maven with your project and want to generate reports using simple maven commands then you can go with this installation.
Steps to install JaCoCo and run reports.</p>

<h3 id="open-up-your-pomxml-and-add-following-lines">Open up your pom.xml and add following lines.</h3>

<figure class="highlight"><pre><code class="language-xml" data-lang="xml"> <span class="nt">&lt;groupId&gt;</span>org.jacoco<span class="nt">&lt;/groupId&gt;</span>
 <span class="nt">&lt;artifactId&gt;</span>jacoco-maven-plugin<span class="nt">&lt;/artifactId&gt;</span>
 <span class="nt">&lt;version&gt;</span>0.8.1-SNAPSHOT<span class="nt">&lt;/version&gt;</span>
<span class="nt">&lt;/plugin&gt;</span>


 <span class="nt">&lt;reporting&gt;</span>
 
 
 <span class="nt">&lt;groupId&gt;</span>org.jacoco<span class="nt">&lt;/groupId&gt;</span>
 <span class="nt">&lt;artifactId&gt;</span>jacoco-maven-plugin<span class="nt">&lt;/artifactId&gt;</span>
 <span class="nt">&lt;reportSets&gt;</span>
 <span class="nt">&lt;reportSet&gt;</span>
 <span class="nt">&lt;reports&gt;</span>
 <span class="nt">&lt;report&gt;</span>report<span class="nt">&lt;/report&gt;</span>
 <span class="nt">&lt;/reports&gt;</span>
 <span class="nt">&lt;/reportSet&gt;</span>
 <span class="nt">&lt;/reportSets&gt;</span>
 <span class="nt">&lt;/plugin&gt;</span>
 <span class="nt">&lt;/plugins&gt;</span>
 <span class="nt">&lt;/reporting&gt;</span>
<span class="nt">&lt;/project&gt;</span></code></pre></figure>

<h3 id="run-the-maven-goals-to-generate-reports">Run the maven goals to generate reports.</h3>
<p>For more options visit.
mvn jacoco:report
For more options visit.
<a href="http://www.eclemma.org/jacoco/trunk/doc/maven.html" rel="nofollow noopener">http://www.eclemma.org/jacoco/trunk/doc/maven.html</a></p>

<h3 id="install-standalone-jacoco-java-agent-on-any-running-java-process-or-server">Install standalone JaCoCo java agent on any running java process or server.</h3>
<p>This suite best when you do want to run JaCoCo on your live or test environments directly. Also in case, you do not have test setups or local workspace setup. There is standalone JaCoCo jar which you can directly plugin in your remote Java process using command line arguments. Once the java agent is attached to your server process you can open up a port to fetch reports or you can directly go to your server and ask for report dump. This report dump can be in any format CSV, XML, *.exec, HTML or zip. In order to use it with Sonarqube, we have export the report in *.exec format.</p>

<p>Here are the commands you to attach JaCoCo to a running Java process.
-javaagent:C:\dev\servers\jacoco-agent.jar=destfile=&lt; path to jacoco C:\lib&gt;jacoco.exec,append=true,includes=some.application.*</p>

<p>This Java argument will attach the JaCoCo agent. Once you have enabled the JaCoCo agent you need to run tests manually or automated. This will create jacoco.exec on given location but dump data only on server stop. To avoid server interruption for the report you need to enable command interface using following option.
output=<tcpserver>,address=*,<em>port=&lt;some port 6300&gt;</em></tcpserver></p>
<h2 id="importing-reports-to-sonarqube">Importing reports to SonarQube</h2>

<figure class="highlight"><pre><code class="language-properties" data-lang="properties"><span class="c"># Generate sonar issues report in html and console
</span><span class="py">sonar.issuesReport.html.enable</span><span class="p">=</span><span class="s">true</span>
<span class="py">sonar.issuesReport.console.enable</span><span class="p">=</span><span class="s">true</span>

<span class="c"># This name depends on the configuration in pom.xml. In this example we have ${project.build.directory}/coverage-reports/jacoco-ut.exec entry in our pom.xml
</span><span class="py">sonar.java.coveragePlugin</span><span class="p">=</span><span class="s">jacoco</span>
<span class="py">sonar.jacoco.reportPath</span><span class="p">=</span><span class="s">D:/jacocoreport/jacoco.exec</span>
<span class="py">sonar.dynamicAnalysis</span><span class="p">=</span><span class="s">reuseReports</span>
<span class="py">sonar.jacoco.reportMissing.force.zero</span><span class="p">=</span><span class="s">true</span></code></pre></figure>

<p>I ran it on one of my old projects. It looks something like this and it looks like this. For further detail, you can click on coverage percentage.<img class="alignnone size-full wp-image-270" src="/assets/img_5a9b5a7882daa.png" alt="" /></p>

            </article>

            <section class="share">
    <h3>Share</h3>
    <a aria-label="Share on Twitter" href="https://twitter.com/intent/tweet?text=&quot;&quot;%20https://sanjaypatel2525.github.io/jacoco-code-coverage-reports-sonarqube/%20via%20&#64;&hashtags="
    onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;" title="Share on Twitter">
        <svg class="icon icon-twitter"><use xlink:href="#icon-twitter"></use></svg>
    </a>
    <a aria-label="Share on Facebook"href="https://www.facebook.com/sharer/sharer.php?u=https://sanjaypatel2525.github.io/jacoco-code-coverage-reports-sonarqube/"
    onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;" title="Share on Facebook">
        <svg class="icon icon-facebook"><use xlink:href="#icon-facebook"></use></svg>
    </a>
    <a aria-label="Share on Google Plus" href="https://plus.google.com/share?url=https://sanjaypatel2525.github.io/jacoco-code-coverage-reports-sonarqube/"
    onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;" title="Share on Google+">
        <svg class="icon icon-google-plus"><use xlink:href="#icon-google-plus"></use></svg>
    </a>
</section>
            <section class="share">
                <div class="fb-comments" data-href="https://sanjaypatel2525.github.io/jacoco-code-coverage-reports-sonarqube/"></div>
            </section>
            <section class="author" itemprop="author">
    <div class="details" itemscope itemtype="http://schema.org/Person">
        <img itemprop="image" class="img-rounded" src="/assets/img/blog-author.jpg" alt="">
        <p class="def">Author</p>
        <h3 class="name">
            <a itemprop="name" href="https://plus.google.com/+/posts">Sanjay Patel</a>
        </h3>
        <p class="desc">Developer at IBM</p>
        <p><a itemprop="email" class="email" href="mailto:sanjaypatel2525@yahoo.com">sanjaypatel2525@yahoo.com</a></p>
        <!--<p><a itemprop="github" class="github" href="https://github.com/">github.com/</a></p>-->
    </div>
</section>

            <footer>
    <p>Made with <a href="http://jekyllrb.com/" target="_blank">Jekyll</a></p>
</footer>
<script src="/assets/js/main.js"></script>
            <div id="fb-root"></div>
        </section>
    </body>
    
    <script>(function(d, s, id) {
        var js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) return;
        js = d.createElement(s); js.id = id;
        js.src = "//connect.facebook.net/en_GB/all.js#xfbml=1&appId=207343132703435";
        fjs.parentNode.insertBefore(js, fjs);
        }(document, "script", "facebook-jssdk"));</script>
</html>
